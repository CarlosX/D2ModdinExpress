// Generated by CoffeeScript 1.4.0
(function() {
  "use strict";

  angular.module("d2mp.controllers", []).controller("HomeCtrl", ["$scope", function($scope) {}]).controller("AboutCtrl", ["$scope", function($scope) {}]).controller("ModsCtrl", ["$scope", function($scope) {}]).controller("LobbyListCtrl", [
    "$scope", "$location", "$routeParams", "$rootScope", "$lobbyService", function($scope, $location, $routeParams, $rootScope, $lobbyService) {
      var publicLobbies;
      publicLobbies = $lobbyService.publicLobbies;
      $scope.hasMod = $routeParams.modname != null;
      if ($scope.hasMod) {
        $scope.mod = _.findWhere($rootScope.mods, {
          name: $routeParams.modname
        });
      }
      $scope.lobbies = publicLobbies;
      $scope.joinLobby = function(lobby) {
        console.log(lobby);
      };
      return $scope.getModThumbnail = function(modid) {
        var mod;
        console.log(modid);
        console.log($rootScope.mods);
        mod = _.findWhere($rootScope.mods, {
          _id: modid
        });
        console.log(mod);
        if (mod != null) {
          return mod.thumbnail;
        } else {
          return "";
        }
      };
    }
  ]).controller("AuthCtrl", [
    "$scope", "$authService", function($scope, $authService) {
      $scope.auth = $authService;
      $scope.startLogin = function() {
        window.location.href = "/auth/steam";
      };
      $scope.signOut = function() {
        window.location.href = "/logout";
      };
      return $scope.joinQueue = function() {
        window.location.href = "http://d2modd.in/";
      };
    }
  ]).controller("ModDetailCtrl", function($scope, $rootScope, $routeParams, $location, $sce) {
    var mod, modname;
    modname = $routeParams.modname;
    mod = _.findWhere($rootScope.mods, {
      name: modname
    });
    if (mod == null) {
      $location.url("/mods/");
      return;
    }
    $scope.btnClass = (mod.playable ? "" : "disabled");
    $scope.mod = mod;
  });

}).call(this);
